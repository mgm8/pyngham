---
title: 'PyNGHam: A Python library of the NGHam protocol'
tags:
  - Python
  - Telecommunications
  - Protocols
  - Ham Radio
authors:
  - name: Gabriel Mariano Marcelino
    orcid: 0000-0003-4889-6021
    affiliation: "1, 2"
affiliations:
 - name: Space Technology Research Laboratory (SpaceLab), Universidade Federal de Santa Catarina
   index: 1
 - name: Senai Institute for Innovation in Embedded Systems (ISI-SE)
   index: 2
date: 30 May 2022
bibliography: paper.bib
---

# Summary

The PyNGHam library is a Python version of the original NGHam protocol library written in C by Jon Petter Skagmo (LA3JPA) [@ngham]. The NGHam protocol is amateur radio protocol developed to be a modern version of the AX.25 protocol, with the main improvement being the addition of a forward error correction (FEC) algorithm, which improves considerably the robustness of a communication link. Nowadays, one of the main usage of this protocol is on small satellites projects (specifically in CubeSats), as the protocol of the radio links between stations on Earth and a satellite. This Python implementation allows an easier integration and use of this protocol in computers and embedded devices.

# NGHam Protocol

The NGHam protocol is a link protocol partly inspired by AX.25 [@ax25], with the idea to be used in ham radio packet communication. It was developed in the context of a CubeSat development in the Norwegian University of Science and Technology (NTNU), and is being used in a few CubeSat missions since then.

A list of known satellites that used or plan to use the NGHam protocol are presented below:

* **FloripaSat-1** [@marcelino2020]
* **GOLDS-UFSC (a.k.a. FloripaSat-2)**
* **Catarina-A1**
* **PION-BR1**
* **Aldebaran-1**
* **NUTS-1**

The top three satellites of the list above, are satellites developed (or in development) by the same research group: the *Space Technology Research Laboratory* (SpaceLab), from *Universidade Federal de Santa Catarina* (Brazil), which was the context where this library was developed.

Figure \ref{fig:ngham-pkt} presents a diagram with the fields of a NGHam packet.

![Fields of a NGHam packet.\label{fig:ngham-pkt}](../docs/ngham-pkt.png)

For a GMSK modulation at 9600 bps, a typical preamble sequenc would be 0xAAAAAAAA (a simple alternance of ones and zeros).

The size tag field have seven different options, indicating seven different packet sizes, as described below:

----------------------------------------------------------------------------
Size Num.   Tag             Reed-Solomon Config.    Max. Data Size
----------  --------------  ---------------------   ------------------------
1           59, 73, 205     RS(47, 31)              up to 28 bytes of data

2           77, 218, 87     RS(79, 63)              up to 60 bytes of data

3           118, 147, 154   RS(111, 95)             up to 92 bytes of data

4           155, 180, 174   RS(159, 127)            up to 124 bytes of data

5           160, 253, 99    RS(191, 159)            up to 156 bytes of data

6           214, 110, 249   RS(223, 191)            up to 188 bytes of data

7           237, 39, 52     RS(255, 223)            up to 220 bytes of data
----------------------------------------------------------------------------

Table:  NGHam packets sizes.

Following the seven possible packet sizes, the next data field is the Reed-Solomon code block, with seven differente schemes, one for each size tag. As can be seen in Figure \ref{fig:ngham-pkt}, the used RS configurations are: (47, 31); (79, 63); (111, 95); (159, 127); (191, 159); (223, 191) and (255, 223).

Inside de code block, there are two types of fields: the packet data and the parity data. The parity data is the byte sequence generated by the Reed-Solomon algorithm. The packet is data is the information of the packet, and is divided in four fields: Header, payload, CRC and padding.

# Python Implementation



# Conclusion

The objective of this library is to offer an alternative purely written in Python for the original NGHam library. This way, this can be easily used in simulations, packet decoding and encoding software, telecommunication classes, and so on. Being useful especially for satellite communication and experiments running on space, and in general for the amateur radio community. This library is already being used in the development of the satellites of the SpaceLab, specifically in the ground station software, that send telecommand and receives data to/from the satellites.

# Acknowledgement

The author would like to thank Jon Petter Skagmo (LA3JPA), the original creator of the protocol, Phil Karn (KA9Q), the developer of FEC library, and the SpaceLab members for the support and feedback over the last years.

# References
